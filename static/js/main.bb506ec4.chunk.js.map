{"version":3,"sources":["model.ts","store/actions.ts","store/reducers.ts","store/store.ts","services/ApiClient.ts","services/Engine.ts","components/DecisionControls/DecisionControls.tsx","components/Plots/Plot.tsx","components/Plots/Plots.tsx","components/ScoreIndicator/ScoreIndicator.tsx","components/Loading/Loading.tsx","components/LanguagePicker/LanguagePicker.tsx","views/Game.tsx","App.tsx","reportWebVitals.js","i18n/i18.ts","index.js","components/DecisionControls/DecisionControls.module.scss","components/Plots/Plots.module.scss","components/ScoreIndicator/ScoreIndicator.module.scss","components/Loading/Loading.module.scss","views/Game.module.scss","components/LanguagePicker/LanguagePicker.module.scss"],"names":["QuizStatus","ActionType","initialState","sessionId","score","indicators","countries","quizStatus","NO_QUIZ","handleGetQuiz","state","action","handlePostAnswer","res","lastAnswer","country","correctCountry","correct","handleRequestSent","REQUEST_SENT","persistConfig","key","storage","persistedReducer","persistReducer","type","GET_QUIZ","POST_ANSWER","store","createStore","applyMiddleware","thunk","ApiClient","persistStore","localStorage","getItem","sessionIdKey","dispatch","axios","get","getUrl","params","catch","err","console","error","data","refreshStoredSession","normalizeIndicators","answer","post","url","log","setItem","API_URL","path","forEach","indicatorData","series","map","entry","parseFloat","stateSessionId","process","Engine","getQuizGameState","postQuizAnswer","getState","DecisionControls","t","useTranslation","controlsDisabledForLoading","className","styles","container","decisionControls","loadingIndicatorContainer","CircularProgress","size","circularProgress","Button","disabled","QUIZ_ANSWERED","onClick","getGameState","variant","nextQuiz","button","FRESH_QUIZ","handleAnswer","Plot","countriesData","options","length","indicator","name","color","undefined","lineWidth","marker","enabled","symbol","highchartsOptions","title","text","legend","plot","highcharts","Highcharts","Plots","uniqueIndicators","Set","plots","uniqueIndicator","filter","prettyPrint","ScoreIndicator","Loading","loading","LanguagePicker","lang","i18n","FormControl","fullWidth","InputLabel","id","Select","value","language","split","label","onChange","event","changeLanguage","target","code","icon","MenuItem","flagEmoji","GameView","useState","setState","setLoading","useEffect","a","setTimeout","e","subscribe","bottomContainer","rightSide","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","resources","en","translation","pl","use","LanguageDetector","initReactI18next","init","fallbackLng","interpolation","escapeValue","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.bb506ec4.chunk.js","sourcesContent":["export enum QuizStatus {\n    NO_QUIZ = 'NO_QUIZ',\n    FRESH_QUIZ = 'FRESH_QUIZ',\n    QUIZ_ANSWERED = 'QUIZ_ANSWERED',\n    REQUEST_SENT = 'REQUEST_SENT',\n}\n\nexport interface GameState {\n    sessionId: string\n    score: number\n    indicators: IndicatorData[]\n    countries: Country[]\n    quizStatus: QuizStatus\n    lastAnswer?: LastAnswer\n}\n\nexport interface IndicatorData {\n    series: [number, number][]\n    indicator: Indicator\n    country?: Country\n}\n\nexport type Country = string\n\nexport type Indicator = string\n\nexport interface ServerResponse {\n    sessionId: string\n    score: number\n    quizStatus: QuizStatus\n}\n\nexport interface LastAnswer {\n    country: string\n    correctCountry: string\n    correct: boolean\n}\n\nexport interface QuizServerResponse extends ServerResponse {\n    indicators: IndicatorData[]\n    countries: Country[]\n}\n\nexport interface AnswerServerResponse extends ServerResponse, LastAnswer {\n    indicators: IndicatorData[]\n}","import {AnswerServerResponse, GameState} from \"../model\";\n\nexport enum ActionType {\n    GET_QUIZ = 'GET_QUIZ',\n    POST_ANSWER = 'POST_ANSWER',\n    REQUEST_SENT = 'REQUEST_SENT',\n}\n\nexport interface Action {\n    type: ActionType\n}\n\nexport interface GetQuizAction extends Action {\n    type: ActionType.GET_QUIZ\n    state: GameState\n}\n\nexport interface PostAnswerAction extends Action {\n    type: ActionType.POST_ANSWER\n    res: AnswerServerResponse\n}\n\nexport interface RequestSentAction extends Action {\n    type: ActionType.REQUEST_SENT\n}","import {Action, ActionType, GetQuizAction, PostAnswerAction, RequestSentAction} from \"./actions\";\nimport {GameState, QuizStatus} from \"../model\";\n\nconst initialState: GameState = {\n    sessionId: '',\n    score: 0,\n    indicators: [],\n    countries: [],\n    quizStatus: QuizStatus.NO_QUIZ,\n}\n\nconst handleGetQuiz = (state: GameState, action: GetQuizAction): GameState => {\n    return {\n        ...state,\n        ...action.state\n    }\n}\n\nconst handlePostAnswer = (state: GameState, action: PostAnswerAction): GameState => {\n    return {\n        ...state,\n        score: action.res.score,\n        indicators: action.res.indicators,\n        quizStatus: action.res.quizStatus,\n        lastAnswer: {\n            country: action.res.country,\n            correctCountry: action.res.correctCountry,\n            correct: action.res.correct\n        }\n    }\n}\n\nconst handleRequestSent = (state: GameState): GameState => {\n    return {\n        ...state,\n        quizStatus: QuizStatus.REQUEST_SENT\n    }\n}\n\nexport default function reducer(state = initialState, action: Action): GameState {\n    // console.log('Reducer input: ', state, action)\n\n    switch (action.type) {\n        case ActionType.GET_QUIZ:\n            state = handleGetQuiz(state, action as GetQuizAction)\n            break\n        case ActionType.POST_ANSWER:\n            state = handlePostAnswer(state, action as PostAnswerAction)\n            break\n        case ActionType.REQUEST_SENT:\n            state = handleRequestSent(state)\n            break\n    }\n\n    return state\n}\n","import storage from \"redux-persist/lib/storage\";\nimport {persistStore, persistReducer} from 'redux-persist'\nimport reducer from \"./reducers\";\nimport {applyMiddleware, createStore} from \"redux\";\nimport thunk from \"redux-thunk\";\n\nconst persistConfig = {\n    key: 'root',\n    storage\n}\n\nconst persistedReducer = persistReducer(persistConfig, reducer)\nexport const store = createStore(persistedReducer, applyMiddleware(thunk))\nexport const persistor = persistStore(store)","import axios from \"axios\"\nimport {AnswerServerResponse, IndicatorData, QuizServerResponse} from \"../model\";\nimport {store} from \"../store/store\";\nimport {ActionType, GetQuizAction} from \"../store/actions\";\n\nexport class ApiClient {\n    static API_URL = process.env.API_URL || localStorage.getItem('API_URL') || 'http://127.0.0.1:80'\n    static sessionIdKey = 'sessionId'\n\n    static async getQuizGameState(): Promise<void> {\n        // TODO: Decide whether to store sessionId in localStorage manually or use persisted redux\n        let sessionId = localStorage.getItem(ApiClient.sessionIdKey)\n        store.dispatch({\n            type: ActionType.REQUEST_SENT\n        })\n\n        const res = await axios.get<QuizServerResponse>(ApiClient.getUrl('quiz'), {\n            params: {sessionId}\n        }).catch((err) => {\n            console.error('Axios error', err)\n            return {data: {} as QuizServerResponse}\n        })\n\n        const state = ({...res.data})\n        ApiClient.refreshStoredSession(sessionId, state.sessionId)\n        ApiClient.normalizeIndicators(state.indicators)\n\n        store.dispatch(({\n            type: ActionType.GET_QUIZ,\n            state\n        }) as GetQuizAction)\n    }\n\n    static async postQuizAnswer(answer: string): Promise<void> {\n        let sessionId = localStorage.getItem(ApiClient.sessionIdKey)\n        store.dispatch({\n            type: ActionType.REQUEST_SENT\n        })\n\n        const res = await axios.post<{ answer: string }, { data: AnswerServerResponse }>(ApiClient.getUrl('answer'), {\n            answer\n        }, {\n            params: {sessionId}\n        }).catch((err) => {\n            console.error('Axios error', err)\n            return {data: {} as AnswerServerResponse}\n        })\n\n        ApiClient.normalizeIndicators(res.data.indicators)\n\n        store.dispatch(({\n            type: ActionType.POST_ANSWER,\n            res: res.data\n        }))\n    }\n\n    static setApiUrl(url: string) {\n        console.log(`Setting API_URL to: ${url}`)\n        localStorage.setItem('API_URL', url)\n        ApiClient.API_URL = url\n    }\n\n    static getUrl(path: string) {\n        return `${ApiClient.API_URL}/${path}`\n    }\n\n    private static normalizeIndicators(indicators: IndicatorData[]) {\n        indicators.forEach(indicatorData => {\n            // @ts-ignore\n            indicatorData.series = indicatorData.series.map(entry => [parseFloat(entry[0]), parseFloat(entry[1])])\n        })\n    }\n\n    private static refreshStoredSession(sessionId: string | null, stateSessionId: string) {\n        if (!sessionId || sessionId !== stateSessionId) {\n            console.log(`No matching session found on server - received a fresh session: ${stateSessionId}`)\n            localStorage.setItem(ApiClient.sessionIdKey, stateSessionId)\n        }\n    }\n}\n","import {ApiClient} from \"./ApiClient\";\nimport {store} from \"../store/store\";\n\n\nexport class Engine {\n\n    static async getGameState() {\n        await ApiClient.getQuizGameState()\n    }\n\n    static async handleAnswer(answer: string) {\n        await ApiClient.postQuizAnswer(answer)\n        store.getState()\n    }\n}","import {Button, CircularProgress} from \"@mui/material\";\nimport React from \"react\";\nimport {Country, QuizStatus} from \"../../model\";\nimport styles from './DecisionControls.module.scss'\nimport {Engine} from \"../../services/Engine\";\nimport {useTranslation} from \"react-i18next\";\n\nexport interface ControlsProps {\n    countries: Country[]\n    quizStatus: QuizStatus\n}\n\nexport const DecisionControls: React.FC<ControlsProps> = ({countries, quizStatus}) => {\n    const {t} = useTranslation()\n\n    const controlsDisabledForLoading = () => quizStatus === QuizStatus.REQUEST_SENT\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.decisionControls}>\n                <div className={styles.loadingIndicatorContainer}>\n                    {controlsDisabledForLoading() && <CircularProgress size={25} className={styles.circularProgress}/>}\n                </div>\n                <Button disabled={controlsDisabledForLoading() || quizStatus !== QuizStatus.QUIZ_ANSWERED}\n                        onClick={() => {\n                            Engine.getGameState()\n                        }} variant={'contained'} className={styles.nextQuiz}>\n                    {t('controls.next_quiz')}\n                </Button>\n                {\n                    countries.map(country =>\n                        <div className={styles.button}>\n                            <Button disabled={controlsDisabledForLoading() || quizStatus !== QuizStatus.FRESH_QUIZ}\n                                    variant=\"contained\"\n                                    onClick={() => Engine.handleAnswer(country)}>\n                                {t(`country.${country}`)}\n                            </Button>\n                        </div>\n                    )\n                }\n            </div>\n        </div>\n    )\n}","import * as React from 'react'\nimport * as Highcharts from 'highcharts'\nimport HighchartsReact from \"highcharts-react-official\";\nimport {IndicatorData, LastAnswer} from \"../../model\";\nimport {StandardProps} from \"../types\";\nimport styles from './Plots.module.scss'\nimport {useTranslation} from \"react-i18next\";\nimport {XrangePointOptionsObject} from \"highcharts\";\n\nexport interface PlotProps {\n    countriesData: IndicatorData[]\n    lastAnswer?: LastAnswer\n    options?: Highcharts.Options\n}\n\nexport const Plot: React.FC<PlotProps & StandardProps> = ({countriesData, options, lastAnswer}) => {\n    const {t} = useTranslation()\n\n    const series = lastAnswer && countriesData.length > 1 ? countriesData.map((indicator: IndicatorData) => ({\n            name: t(`country.${indicator.country}`),\n            data: indicator.series as Partial<XrangePointOptionsObject>,\n            type: 'line',\n            color: indicator.country === lastAnswer.correctCountry ? '#006ABD' : undefined,\n            lineWidth: indicator.country === lastAnswer.correctCountry ? 2 : 1,\n        marker: {\n            enabled: indicator.country === lastAnswer?.correctCountry,\n            symbol: 'circle',\n        }\n        })) :\n        [\n            {\n                name: '???',\n                data: countriesData[0].series as Partial<XrangePointOptionsObject>,\n                type: 'line',\n                color: '#006ABD',\n                lineWidth: 2,\n                marker: {\n                    enabled: true,\n                    symbol: 'circle'\n                }\n            }\n        ]\n\n    const highchartsOptions: Highcharts.Options = {\n        title: {\n            text: t(`indicator.${countriesData[0].indicator}`)\n        },\n        // @ts-ignore\n        series: series,\n        legend: {\n            enabled: false\n        },\n        ...options\n    }\n\n    return <div className={styles.plot}>\n        <HighchartsReact className={styles.highcharts} highcharts={Highcharts} options={highchartsOptions}/>\n    </div>\n}\n","import * as React from 'react'\nimport {IndicatorData, LastAnswer} from \"../../model\";\nimport {Plot} from \"./Plot\";\nimport styles from './Plots.module.scss'\nimport {StandardProps} from \"../types\";\n\nexport interface PlotsProps {\n    indicators: IndicatorData[]\n    lastAnswer?: LastAnswer\n}\n\nexport const Plots: React.FC<PlotsProps & StandardProps> = ({indicators, lastAnswer}) => {\n    const uniqueIndicators = [...new Set(indicators.map(indicator => indicator.indicator))]\n    return (\n        <div className={styles.plots}>\n            {\n                uniqueIndicators.map((uniqueIndicator => <Plot countriesData={indicators.filter(indicator => indicator.indicator === uniqueIndicator)} lastAnswer={lastAnswer}/>))\n            }\n        </div>\n    )\n}\n","import React from \"react\";\nimport {LastAnswer, QuizStatus} from \"../../model\";\nimport styles from './ScoreIndicator.module.scss'\nimport {useTranslation} from \"react-i18next\";\n\nexport interface ScoreProps {\n    score: number\n    lastAnswer?: LastAnswer\n    quizStatus: QuizStatus\n}\n\nconst prettyPrint = (lastAnswer: LastAnswer, t: Function) => {\n    return lastAnswer.correct ?\n        <span>{t('score.correct')}</span> :\n        <span>{t('score.incorrect.1')} <b>{t(`country.${lastAnswer.correctCountry}`)}</b> {t('score.incorrect.2')} <i>{t(`country.${lastAnswer.country}`)}</i></span>\n}\n\nexport const ScoreIndicator: React.FC<ScoreProps> = ({score, lastAnswer, quizStatus}) => {\n    const {t} = useTranslation()\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.score}>\n                <span>{t('score')}: <b>{score}</b></span>\n            </div>\n            <div>\n                {\n                    lastAnswer && quizStatus === QuizStatus.QUIZ_ANSWERED &&\n                    <span>{prettyPrint(lastAnswer, t)}</span>\n                }\n            </div>\n        </div>)\n}","import React from \"react\";\nimport {CircularProgress} from \"@mui/material\";\nimport styles from './Loading.module.scss'\nimport {ServerAddress} from \"../ServerAddress/ServerAddress\";\nimport {useTranslation} from \"react-i18next\";\n\nexport const Loading: React.FC = () => {\n    const {t} = useTranslation()\n\n    return <>\n        <div className={styles.loading}>\n            <div>\n                <CircularProgress size={80} className={styles.circularProgress}/>\n            </div>\n\n        </div>\n    </>\n}\n","import React from \"react\";\nimport {FormControl, InputLabel, MenuItem, Select, SelectChangeEvent} from \"@mui/material\";\nimport styles from './LanguagePicker.module.scss'\nimport {useTranslation} from \"react-i18next\";\n\nexport const LanguagePicker: React.FC = () => {\n    const {t, i18n} = useTranslation()\n\n    const handleChange = (event: SelectChangeEvent<string>) => {\n        i18n.changeLanguage(event.target.value)\n    }\n\n    const normalizeLanguage = (lang: string) => {\n        return lang.split('-')[0]\n    }\n\n    const supportedLanguages = [\n        {\n            code: 'en',\n            icon: 'ðŸ‡¬ðŸ‡§'\n        },\n        {\n            code: 'pl',\n            icon: 'ðŸ‡µðŸ‡±'\n        }\n    ]\n\n    return (\n        <div className={styles.container}>\n            <FormControl fullWidth>\n                <InputLabel id=\"demo-simple-select-label\">{t('language')}</InputLabel>\n                <Select\n                    value={normalizeLanguage(i18n.language)}\n                    label={t('language')}\n                    onChange={(value) => handleChange(value)}\n                >\n                    {\n                        supportedLanguages.map(language =>\n                            <MenuItem value={language.code}>\n                                <span className={styles.flagEmoji}>\n                                    {language.icon}\n                                </span>\n                            </MenuItem>\n                        )\n                    }\n                </Select>\n            </FormControl>\n        </div>\n    )\n}","import * as React from \"react\";\nimport {DecisionControls} from \"../components/DecisionControls/DecisionControls\";\nimport {useEffect, useState} from \"react\";\nimport {GameState} from \"../model\";\nimport {Plots} from \"../components/Plots/Plots\";\nimport {store} from \"../store/store\";\nimport {Engine} from \"../services/Engine\";\nimport {ScoreIndicator} from \"../components/ScoreIndicator/ScoreIndicator\";\nimport {Loading} from \"../components/Loading/Loading\";\nimport styles from './Game.module.scss'\nimport {ServerAddress} from \"../components/ServerAddress/ServerAddress\";\nimport {LanguagePicker} from \"../components/LanguagePicker/LanguagePicker\";\n\n\nexport const GameView: React.FC = () => {\n    const [state, setState] = useState<GameState>({} as GameState)\n    const [loading, setLoading] = useState<Boolean>(true)\n\n\n    useEffect(() => {\n        const getGameState = async () => {\n            try {\n                setLoading(true)\n                await Engine.getGameState()\n                setLoading(false)\n            } catch (e) {\n                console.log('Error on getting game state', e)\n                setTimeout(getGameState, 5000)\n            }\n        }\n\n        getGameState().catch(e => console.log('Error on getting game state', e))\n\n        store.subscribe(() => {\n            setState(store.getState())\n        })\n    }, [])\n\n    return (\n        <div>\n            {loading && <Loading/>}\n            {!loading && <>\n                <Plots indicators={state.indicators} lastAnswer={state.lastAnswer}/>\n                <div className={styles.bottomContainer}>\n                    <div>\n                        <ScoreIndicator quizStatus={state.quizStatus} score={state.score}\n                                        lastAnswer={state.lastAnswer}/>\n                    </div>\n                    <div className={styles.rightSide}>\n                        <LanguagePicker/>\n                    </div>\n                    <div>\n                        <DecisionControls quizStatus={state.quizStatus} countries={state.countries}/>\n                    </div>\n                </div>\n            </>}\n        </div>\n    )\n}\n","import './App.css';\nimport {GameView} from \"./views/Game\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <GameView/>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import i18n from 'i18next'\nimport { initReactI18next } from 'react-i18next'\nimport LanguageDetector from 'i18next-browser-languagedetector'\n\nimport translationEn from './locales/en.json'\nimport translationPl from './locales/pl.json'\n\nconst resources = {\n    en: {\n        translation: translationEn,\n    },\n    pl: {\n        translation: translationPl,\n    },\n}\n\n// @ts-ignore\ni18n.use(LanguageDetector)\n    .use(initReactI18next)\n    .init({\n        resources,\n        fallbackLng: 'en',\n        // keySeparator: false,\n        interpolation: {\n            escapeValue: false,\n        },\n    })\n\nexport default i18n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport './i18n/i18'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"DecisionControls_container__2paiT\",\"button\":\"DecisionControls_button__1VI33\",\"decisionControls\":\"DecisionControls_decisionControls__1KGLM\",\"nextQuiz\":\"DecisionControls_nextQuiz__3NGOv\",\"loadingIndicatorContainer\":\"DecisionControls_loadingIndicatorContainer__28ik5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"plot\":\"Plots_plot__WbCFU\",\"highcharts\":\"Plots_highcharts__1gAik\",\"plots\":\"Plots_plots__2cuRz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ScoreIndicator_container__1kj0R\",\"score\":\"ScoreIndicator_score__gJmvX\",\"answer\":\"ScoreIndicator_answer__3iiG8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading\":\"Loading_loading__3SgGS\",\"circularProgress\":\"Loading_circularProgress__dOjQR\",\"message\":\"Loading_message__3DTTj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bottomContainer\":\"Game_bottomContainer__U_o2q\",\"rightSide\":\"Game_rightSide__2Rs7D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LanguagePicker_container__2b-kH\",\"flagEmoji\":\"LanguagePicker_flagEmoji__3l-6K\"};"],"sourceRoot":""}